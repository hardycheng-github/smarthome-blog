[ğŸ§¾å»é¸å–®](../../README.md)

> ç™¼å¸ƒæ–¼: 2025/4/17

# å±…å®¶Bluetoothç³»åˆ—ï¼šå°ç±³é›»æ± äººåœ¨æ„Ÿæ‡‰å™¨ï¼ˆ2025ï¼‰

![](attachments/mi_human_presence/2.jpg)

> 2025å¹´æœ€æ–°é‡è£½ç‰ˆ

## ç›®éŒ„

- [å¿«é€Ÿç¸½çµ](#å¿«é€Ÿç¸½çµ)
- [å„ªé»](#ğŸ‘-å„ªé»)
- [ç¼ºé»](#ğŸ‘-ç¼ºé»)
- [æ­£æ–‡](#æ­£æ–‡é–‹å§‹)
- [ä½¿ç”¨å¿ƒå¾—](#ä½¿ç”¨å¿ƒå¾—åˆ†äº«)
- [æ›´æ›é›»æ± æ•™å­¸](#å¦‚ä½•æ›´æ›é›»æ± )
- [æ¥å…¥HAæ•™å­¸](#å¾é›¶é–‹å§‹æ¥å…¥HA)
- [ç¸½çµ](#ç¸½çµ)


## å¿«é€Ÿç¸½çµ

- ç›®å‰é«”é©—è‰¯å¥½çš„å°ç±³é›»æ± äººåœ¨æ„Ÿæ‡‰å™¨
- çµåˆç´…å¤–ç·šã€å¾®æ³¢é›·é”ã€å…‰ç…§åº¦æ„Ÿæ‡‰å™¨
- é›»æ± ä¾›é›»ï¼Œç„¡é ˆèµ°ç·šï¼Œè¨­ç½®åœ°é»å¤§è§£æ”¾ï¼
- æ·˜å¯¶å”®åƒ¹ç´„äººæ°‘å¹£120 (å°å¹£550)
- æ¡ç”¨`CR2450` (æ³¨æ„ä¸æ˜¯CR2032)
- æ¨™ç¨±çºŒèˆª3å¹´ (æœ‰ä½†æ›¸ä¸‹é¢èªªæ˜)
- å®‰è£åœ°é»é¿é–‹ç¶“å¸¸æœ‰äººçš„ç©ºé–“é¿å…åŠ é€Ÿè€—é›»
- å®‰è£åœ°é»é¿é–‹é¢¨å¹ã€éœ‡å‹•å¹²æ“¾æº


### ğŸ‘ å„ªé»

#### æ¨™ç¨±3å¹´çºŒèˆªåŠ›

ç‚ºæé«˜çºŒèˆªåŠ›è€Œæ¡ç”¨`CR2450`å¤§é¡†éˆ•æ‰£é›»æ± ã€‚

> è«‹æ³¨æ„ä¸¦éæ˜¯å°å‹çš„CR2032éˆ•æ‰£é›»æ± å–”

å®˜æ–¹è²ç¨±ä¸€é¡†é›»æ± å…·æœ‰`3å¹´`çºŒèˆª

å¦‚è‹¥ç‚ºçœŸï¼Œé‚£ç¢ºå¯¦æ˜¯éå¸¸å¥½ç”¨çš„ç”¢å“

ä¸éçºŒèˆªæœƒå› ç‚º**éˆæ•åº¦ã€è§¸ç™¼æ™‚é–“**è€Œæœ‰æ‰€ä¸åŒ

#### å®‰è£ä½ç½®æ²’æœ‰é™åˆ¶

é›»æ± ä¾›é›»æ‰€ä»¥ä¸éœ€è¦é¡å¤–ç…©æƒ±é›»åŠ›ç·šï¼Œæƒ³æ”¾å“ªè£¡å°±æ”¾å“ªè£¡ã€‚

#### ç²¾ç¾çš„å¤ªç©ºäººé…ä»¶

å¯ä»¥åœ¨æ·˜å¯¶è³¼è²·å¤ªç©ºäºº3Dé…ä»¶å¦‚åœ–ï¼Œç›´æ¥åŒ–èº«è£é£¾å“

å¤§å¤§çš„æé«˜é¡å€¼ï¼Œæ“ºåœ¨å®¶ä¸­ä»»ä½•è§’è½éƒ½ä¸çªå…€äº†

![](attachments/mi_human_presence/3.jpg)

#### äººåœ¨è§¸ç™¼è¿…é€Ÿåæ‡‰

æ—¥å‰èˆ‡ç™½ç‰Œçš„é›»æ± äººåœ¨æ„Ÿæ‡‰æ¶è¨­åœ¨ç›¸åŒçš„ä½ç½®åšæ¯”è¼ƒ

é«”é©—ä¸Šå°ç±³çš„**è§¸ç™¼é€Ÿåº¦æ›´å¿«**

å®¶è£¡å·²ç¶“æ·˜æ±°äº†å…©å€‹ç™½ç‰Œé›»æ± äººåœ¨æ„Ÿæ‡‰

å…¨éƒ¨æ›¿æ›æˆå°ç±³é›»æ± äººåœ¨æ„Ÿæ‡‰äº†

### ğŸ‘ ç¼ºé»

#### å®‰è£åœ¨éŒ¯èª¤çš„åœ°é»æœƒåŠ é€Ÿé›»é‡æ¶ˆè€—

è«‹å‹¿å®‰è£åœ¨è‡¥å®¤ã€å®¢å»³ç­‰é•·æ™‚é–“æœ‰äººçš„å€åŸŸ

å¦å‰‡é›·é”æŒçºŒé‹ä½œæœƒå¿«é€Ÿæ¶ˆè€—é›»æ± é›»é‡

#### æ¥å…¥HAæ–¹å¼è¼ƒç‚ºè¤‡é›œ

æ­¤ç”¢å“å¯ä»¥é€éHAçš„`Xiaomi BLE`æ•´åˆç›´æ¥æ·»åŠ 

ä½†ä½ å¿…é ˆå…ˆå°‡HAæ ¸å¿ƒå‡ç´šè‡³`2025.03`ä»¥ä¸Šçš„ç‰ˆæœ¬

ä¸¦ä¸”è¦å…ˆå°‡è£ç½®èˆ‡`ç±³å®¶APP(ä¸­åœ‹ä¼ºæœå™¨)`åšé…å°

> HAæ ¸å¿ƒ2024.10å°±å·²ç¶“æ”¯æ´é€™æ¬¾ç”¢å“ï¼Œä½†æ˜¯éœ€è¦æ‰‹å‹•å–å¾—è£ç½®Token

#### åˆæ¬¡æ¥å…¥HAæœƒè®“äººå›°æƒ‘

éƒ¨åˆ†BLEè¨Šæ¯å»£æ’­å‘¨æœŸå¾ˆé•·

ä¾‹å¦‚é›»é‡å¯èƒ½è¦ç­‰8å€‹å°æ™‚æ‰æ›´æ–°ä¸€æ¬¡

äººåœ¨æ„Ÿæ‡‰ç‹€æ…‹ã€å…‰ç…§å€¼ä¸æœƒæŒçºŒå»£æ’­å‡ºä¾†

é ˆä¸»å‹•è§¸ç™¼ç‹€æ…‹æ”¹è®Šæ‰æœƒåœ¨HAä¸­çœ‹åˆ°ç›¸é—œå…§å®¹

#### BLEé‹ä½œæ¨¡å¼çš„é™åˆ¶

ä½åŠŸè€—è—èŠ½(BLE)è£ç½®æ˜¯æ¡ç”¨å»£æ’­çš„æ–¹å¼å‚³éè¨Šæ¯

ä¸€æ—¦ä½ çš„HAä¸»æ©ŸéŒ¯éäº†ä¸€æ¬¡å»£æ’­è¨Šæ¯

ä½ å°‡ä¸æœƒå†æ¬¡æ”¶åˆ°è©²è§¸ç™¼äº‹ä»¶

è«‹**ç¢ºä¿HAä¸»æ©Ÿç«¯çš„è—èŠ½æ¥æ”¶èƒ½åŠ›**ç©©å®šæ€§

#### å…‰ç…§åº¦çš„å¯ç”¨æ€§

å…‰ç…§åº¦æœƒå®šæ™‚ç™¼å‡ºBLEå»£æ’­

å¯ä»¥åšç‚ºç’°å¢ƒäº®åº¦åƒè€ƒ

ä½†æ˜¯ç¤™æ–¼é›»æ± ç¯€ç´„éœ€æ±‚å°è‡´å»£æ’­é€±æœŸè¼ƒé•·

æ‹¿ä¾†åšé–‹é—œç‡ˆåˆ¤æ–·æœƒæœ‰å¾ˆå¤§å»¶é²

æ¯”è¼ƒé©åˆç•¶ä½œæ—¥å‡ºæ—¥è½çš„å¤§ç’°å¢ƒåˆ¤æ–·

ä½†é€™é¡ç”¢å“é©åˆå®‰è£åœ¨å®¤å…§ä¸”é é›¢çª—æˆ¶ç­‰å¹²æ“¾æº

å°è‡´å…‰ç…§åº¦åŠŸèƒ½ä½¿ç”¨ä¸Šæœ‰é»çŸ›ç›¾

#### éƒ¨åˆ†åŠŸèƒ½éœ€ä¾è³´ç±³å®¶APP

ä¸€é–‹å§‹è¦å…ˆèˆ‡ç±³å®¶APP(ä¸­åœ‹ä¼ºæœå™¨)é…å°

å¦å¤–å¦‚æœä½ æƒ³è¦èª¿æ•´æ„Ÿæ‡‰å™¨åƒæ•¸ã€å‡ç´šéŸŒé«”

ä¹Ÿéœ€è¦ä½¿ç”¨ç±³å®¶APPæ‰èƒ½æ“ä½œ

ä¸éé™¤äº†ä»¥ä¸Šéœ€æ±‚å¤–æ˜¯ä¸ç”¨ä¾è³´ç±³å®¶APPçš„

å¯ä»¥åœ¨HAè¨­å®šå®Œæˆå¾Œ**ç›´æ¥åˆªé™¤ç±³å®¶APP**

#### é›·é”æ„Ÿæ‡‰å¹²æ“¾æº

é›·é”æ³¢å¯ä»¥æŒçºŒåµæ¸¬åˆ°äººçš„å‘¼å¸å¿ƒè·³

åŒæ™‚ä¹Ÿå®¹æ˜“å—åˆ°`é¢¨æ‰‡ç©ºèª¿`ã€`é¦¬é”éœ‡å‹•`ã€`ç„¡ç·šè¨Šè™Ÿ`ç­‰ç’°å¢ƒå› ç´ å¹²æ“¾

å¾ˆå¤šæƒ…æ³ä¸‹å¯èƒ½æœƒå°è‡´åˆ¤æ–·ç•°å¸¸

ä¾‹å¦‚ï¼š
- æ­£å°è‘—é‹ä½œä¸­çš„æ´—è¡£æ©Ÿ
- é™½å°è‡ªç„¶é¢¨å¹²æ“¾
- ç©ºèª¿æˆ–é¢¨æ‰‡å‡ºé¢¨å¹²æ“¾

## æ­£æ–‡é–‹å§‹

æœ¬ç¯‡æ˜¯æˆ‘é¦–å€‹è—èŠ½è£ç½®çš„å¿ƒå¾—åˆ†äº«

å› ç‚ºå“ˆè¿ªæ²’æœ‰å°ç±³è—èŠ½ç¶²é—œ

é€™é‚Šä¸»è¦æ˜¯**ä»¥æ²’æœ‰å°ç±³ç¶²é—œçš„æ–¹æ¡ˆ**å»åšèªªæ˜

å¦‚æœæ˜¯å·²ç¶“æœ‰åœ¨ä½¿ç”¨`Xiaomi Gateway 3`çš„å¤¥ä¼´è«‹è‡ªè¡Œæ‘¸ç´¢

å¦å¤–HAæ ¸å¿ƒ`2025.03`ä»¥ä¸Šå¯ç›´æ¥ç™»å…¥å°ç±³å¸³è™Ÿå¯†ç¢¼

ä¸å†éœ€è¦æ‰‹å‹•è¼¸å…¥Tokenï¼Œæ‰€ä»¥é€™é‚Šä¸æœƒä»‹ç´¹å¦‚ä½•å–å¾—å°ç±³Token

> å–å¾—Tokençš„æ–¹å¼è«‹è‡ªè¡Œåƒè€ƒ[Xiaomi-cloud-tokens-extractor](https://github.com/PiotrMachowski/Xiaomi-cloud-tokens-extractor)

é€™é‚Šæé†’ä¸€é»ï¼Œä½¿ç”¨ç±³å®¶APPé…å°è«‹å…ˆåˆ‡æ›è‡³`ä¸­åœ‹ä¼ºæœå™¨`

å°ç£åœ°å€æ²’æœ‰æ”¯æ´é€™å€‹å°ç±³é›»æ± äººåœ¨æ„Ÿæ‡‰å™¨

è«‹å…ˆæº–å‚™ä»¥ä¸‹å…¶ä¸­ä¸€ç¨®è—èŠ½æ¥æ”¶æ–¹æ¡ˆ

- å°ç±³è—èŠ½ç¶²é—œé…åˆXiaomi Gateway 3æ•´åˆä½¿ç”¨
- HAä¸»æ©Ÿæœ‰è—èŠ½æ¨¡çµ„/æ¥æ”¶å™¨åŠŸèƒ½
- ç”¨ESP32æ™¶ç‰‡æ­é…ESPhomeä½œç‚ºè—èŠ½ä»£ç†[(æŸ¥çœ‹èªªæ˜)](https://esphome.io/components/bluetooth_proxy.html)

å¦å¤–è«‹æ³¨æ„ä»¥ä¸‹å•é¡Œ

- æº–å‚™å…¨æ–°çš„CR2450é›»æ± ä¸€é¡†
- å°‡HAæ ¸å¿ƒå‡ç´šè‡³`2025.03`ä»¥ä¸Šçš„ç‰ˆæœ¬
- ç›¡é‡ä¸è¦è·Ÿç¬¬ä¸‰æ–¹Passive BLE Monitorå·¥å…·ä¸€èµ·ä½¿ç”¨
- ç¢ºèªè—èŠ½æ¥æ”¶ç«¯çš„å‘¨åœæ²’æœ‰æ˜é¡¯çš„2.4GHzå¹²æ“¾æº
- è£ç½®åŠ å…¥HAå¾Œè«‹è€å¿ƒç­‰å¾…æ•¸å°æ™‚

å¾Œé¢æœƒä»‹ç´¹[å¦‚ä½•æ›´æ›é›»æ± ](#å¦‚ä½•æ›´æ›é›»æ± )ä»¥åŠ[å¦‚ä½•æ¥å…¥HA](#å¾é›¶é–‹å§‹æ¥å…¥HA)

## ä½¿ç”¨å¿ƒå¾—åˆ†äº«

æœ¬ç”¢å“å·²ç¶“åœ¨å®¶è£¡ç©©å®šä½¿ç”¨åŠå¹´ä»¥ä¸Š

ç›®å‰é«”é©—æ¯”ä¹‹å‰é‚£å€‹ç³Ÿç³•çš„ç™½ç‰Œæ„Ÿæ‡‰å™¨å¥½å¤šäº†

ä¾†é€™è£¡è¤‡ç¿’ä¹‹å‰çš„ä¸æ¨æ–‡é¿é›·ä¸€ä¸‹

[å±…å®¶Zigbeeç³»åˆ—ï¼š(ä¸æ¨) é›»æ± ç‰ˆäººåœ¨æ„Ÿæ‡‰](../../blog/zigbee/tuya_battery_human_presence_sensor.md)

å°ç±³çš„æ„Ÿæ‡‰å™¨åæ‡‰éå¸¸å¿«é€Ÿï¼ŒçºŒèˆªåŠ›ç›®å‰å…©é¡†é‚„OK

ä½¿ç”¨å…©å€‹æœˆéƒ½é‚„ç¶­æŒ100%çš„é›»é‡

ä½†åŒæ™‚ä¹Ÿè®“æˆ‘æ‡·ç–‘é›»é‡æ•¸å€¼çš„æº–ç¢ºæ€§

åªèƒ½è®“æ™‚é–“è­‰æ˜ä¸€åˆ‡äº†

å“ˆè¿ªåŒæ™‚ä¹Ÿåœ¨æ·˜å¯¶è²·äº†é€™æ¬¾æ„Ÿæ‡‰å™¨å°ˆç”¨çš„

å…©æ¬¾å¤ªç©ºäºº3Dåˆ—å°æ¨¡çµ„ (å¦‚åœ–)

![](attachments/mi_human_presence/3.jpg)

é ­éƒ¨é›¶ä»¶æ˜¯å¯ä»¥**ä¸Šä¸‹å·¦å³èª¿æ•´è§’åº¦**çš„

é¡å€¼éå¸¸é«˜ï¼Œæ“ºåœ¨ç„é—œè³å¿ƒæ‚…ç›®

å®‰è£æ–¹å¼éå¸¸ç°¡å–®

çœ‹æœ¬æ–‡å½±ç‰‡å°±çŸ¥é“æ€éº¼è£äº†

https://github.com/user-attachments/assets/43401733-0a07-4975-8bc0-b97dbc3e0a2e

å¤ªç©ºäººæ”¯æ¶åƒ¹æ ¼ä¸ç®—ä¾¿å®œ (ä¸€å€‹100~200å°å¹£)

å¦‚æœä¸æ˜¯é¡å€¼æ§çš„å¤¥ä¼´å°±ä¸è¦æµªè²»é€™å€‹éŒ¢äº†

å®˜æ–¹çš„ç£å¸åº•åº§èƒ½éš¨æ„æ—‹è½‰360åº¦

ç£åŠ›éå¸¸å¼·ï¼Œé‡åˆ°åœ°éœ‡æ‡‰è©²æ˜¯ä¸æœƒæ‰ä¸‹ä¾†çš„

é‚„èƒ½é»åœ¨ç‰†ä¸Šæˆ–å¤©èŠ±æ¿å·²ç¶“éå¸¸å¥½ç”¨

ç£å¸çš„æ–¹å¼å¯ä»¥åƒè€ƒæœ¬æ–‡å½±ç‰‡

https://github.com/user-attachments/assets/c0c6e297-80cb-4ac2-b7ed-09437274f012

https://github.com/user-attachments/assets/62a9c0ce-549b-4aa5-9bb1-e3c47039b34f


## é›è‚‹çš„å…‰ç…§æ„Ÿæ¸¬å™¨

å…‰ç…§åº¦çš„æ•¸å€¼å¯¦éš›ä½¿ç”¨ä¸Šæœ‰é»çŸ›ç›¾

å› ç‚ºæœ¬ç”¢å“çš„å…‰ç…§æ›´æ–°æ•¸å€¼ä¸å¤ªé »ç¹

æ¯”è¼ƒé©åˆæ‡‰ç”¨åœ¨ç™½å¤©åŠå¤œæ™šçš„è‡ªç„¶å…‰åˆ¤æ–·

ä½†æ˜¯é€™é¡æ„Ÿæ‡‰å™¨æ¯”è¼ƒé©åˆå®‰è£åœ¨å®¤å…§

ä¸¦ä¸”ç†æ‡‰é é›¢é–€çª—ç­‰æ°£æµå¹²æ“¾

é€™æ¨£çš„æƒ…æ³ä¸‹åˆç„¡æ³•æ‹¿ä¾†åˆ¤æ–·è‡ªç„¶å…‰

ç”¨ä¾†ç•¶ä½œå®¤å…§ç‡ˆæ˜¯å¦é–‹å•Ÿåˆä¸å¤ å³æ™‚

ç¸½ä¹‹æœ‰é»é›è‚‹

## ç”¢å“æ“ºæ”¾æŠ€å·§

å„ä½å¿…é ˆçŸ¥é“ç”¢å“èƒŒå¾Œçš„æŠ€è¡“é¢

å¾®æ³¢é›·é”æ˜¯ä¸€ç¨®**éå¸¸è€—é›»**çš„äººé«”æª¢æ¸¬æ–¹å¼

é€™å°±æ˜¯å¸‚é¢ä¸Šé›·é”æ„Ÿæ‡‰å™¨å¤§å¤šæ˜¯èµ°**æœ‰ç·šä¾›é›»**çš„åŸå› 

è€Œå°ç±³é€™é¡åƒé›»æ± çš„è¤‡åˆå¼äººé«”æ„Ÿæ‡‰å™¨

å°±åˆ©ç”¨ç´…å¤–ç·š(PIR)å»åšåˆå§‹è§¸ç™¼

åˆ¤æ–·æœ‰äººä¹‹å¾Œæ‰ç”±é›·é”æ¥æ‰‹æŒçºŒåµæ¸¬

æ‰€ä»¥å¯ä»¥åšåˆ°é•·æ™‚é–“å¾…æ©Ÿä¹Ÿä¸è‡³æ–¼ç‰¹åˆ¥è€—é›»

æœ‰é‘‘æ–¼æ­¤

è«‹å„ä½åœ¨å¸ƒç½®é€™å€‹æ„Ÿæ‡‰å™¨æ™‚è¦æ…é¸åœ°é»

**ä¸è¦**å®‰è£åœ¨è‡¥å®¤æˆ–å®¢å»³é€™é¡**é•·æ™‚é–“æœ‰äºº**çš„åœ°é»

> ä»¥ä¸Šåœ°é»è«‹ä½¿ç”¨æœ‰ç·šä¾›é›»çš„æ–¹æ¡ˆ

æœ€ä½³å®‰è£åœ°é»æ˜¯åœ¨`æ›´è¡£å®¤`åŠ`ç„é—œ`

åœ¨å®¤å…§å°‘æœ‰å¹²æ“¾æºçš„åŒæ™‚åˆä¸æœƒé•·æ™‚é–“æœ‰äººåœ¨

å¦å¤–`å»æ‰€`åŠ`é™½å°`ä¹Ÿ**ä¸é©åˆ**å®‰è£

å› ç‚ºæœƒå—åˆ°è«¸å¤šå¹²æ“¾æºçš„å½±éŸ¿

ç´…å¤–ç·šè·Ÿé›·é”æ„Ÿæ‡‰éƒ½æœ‰èª¤å ±çš„å¯èƒ½æ€§

ç´…å¤–ç·šæœƒè¢«è¿‘ä¼¼äººé«”æº«åº¦çš„ç†±æºå¹²æ“¾

å¤å¤©æ™‚é€™ç¨®æƒ…æ³æœƒæ›´åŠ æ˜é¡¯

ä»¥å¾Œå°ç£å¤å¤©å®¤å¤–çš„PIRæ‡‰è©²éƒ½ç„¡æ³•æ­£å¸¸é‹ä½œäº†

é›·é”å‰‡æ˜¯æœƒè¢«ç©ºèª¿é¢¨æ‰‡ã€æ´—è¡£æ©Ÿéœ‡å‹•ã€æ°´æµç­‰å› ç´ å¹²æ“¾

> æœ€æ–°çš„éŸŒé«”æœ‰æ”¯æ´å¹²æ“¾æ’é™¤åŠŸèƒ½ï¼Œä½†æ•ˆæœå¾…é©—è­‰

å› æ­¤è¦æ…é¸å®‰è£ä½ç½®

é¿å…å¹²æ“¾èª¤è§¸ç™¼

## ä½åŠŸè€—è—èŠ½(BLE)çš„é™åˆ¶

BLEè£ç½®æ˜¯æ¡ç”¨**å»£æ’­**çš„æ–¹å¼å‚³éè¨Šæ¯

ä¸æœƒå»ç®¡ä¸»æ©Ÿæ˜¯å¦æ­£ç¢ºæ”¶åˆ°æ¶ˆæ¯

é€™ä¹Ÿæ˜¯BLEè£ç½®é”åˆ°ä½åŠŸè€—çš„æ¢ä»¶ä¹‹ä¸€

ä½†åŒæ™‚ä¹Ÿæ˜¯å€‹éœ€è¦è€ƒé‡çš„é™åˆ¶

ä¸€æ—¦ä½ çš„ä¸»æ©ŸéŒ¯éäº†ä¸€æ¬¡å»£æ’­è¨Šæ¯

é‚£éº¼BLEè£ç½®ä¹Ÿä¸æœƒå†ä¸»å‹•é‡æ–°ç™¼é€äº†

ä½ å°‡ç›´æ¥éŒ¯éé€™æ¬¡çš„è§¸ç™¼äº‹ä»¶

å¦‚æœæ˜¯æº«æ¿•åº¦è¨ˆä¸ŸåŒ…é‚„ç®—å°äº‹

ä½†äººé«”æ„Ÿæ‡‰è§¸ç™¼ä¸ŸåŒ…å°±å¾ˆæ‹‰ä½é«”é©—äº†

é€™å–æ±ºæ–¼HAä¸»æ©Ÿç«¯çš„è—èŠ½æ¥æ”¶èƒ½åŠ›

ä½ çš„æ¥æ”¶ç«¯è—èŠ½æ¨¡çµ„å¿…é ˆè¶³å¤ ç©©å®š

å¦‚æœæ˜¯æ¡ç”¨ESP32çš„è—èŠ½ä»£ç†åŠŸèƒ½

é€™å€‹å“ˆè¿ªæš«æ™‚æ²’æœ‰ç ”ç©¶

ç›®å‰æ˜¯ä½¿ç”¨USBè—èŠ½æ¨¡çµ„è®“HAæœ‰è—èŠ½åŠŸèƒ½

å¹¾å€‹æœˆä¸‹ä¾†çš„æ„Ÿæ‡‰è‡ªå‹•åŒ–é–‹ç‡ˆé«”é©—æ˜¯è‰¯å¥½çš„

## å¦‚ä½•æ›´æ›é›»æ± 

æ‹¿åˆ°æ–°çš„å°ç±³é›»æ± äººåœ¨

è«‹å…ˆæ›´æ›ä¸€å€‹å…¨æ–°çš„é«˜å“è³ªCR2450é›»æ± 

é€™æ¬¾ç”¢å“æ²’åšé›»æ± éš”é›¢

åº«å­˜å“é›»æ± å¾ˆå¯èƒ½è¢«æ¶ˆè€—å¤§åŠäº†

é›»æ± æ›´æ›æ–¹æ³•è«‹åƒè€ƒä»¥ä¸‹å½±ç‰‡

https://github.com/user-attachments/assets/9001b04b-92e9-4131-ad15-be10a2c7a542

## å¾é›¶é–‹å§‹æ¥å…¥HA

å…ˆæ±ºæ¢ä»¶ï¼š
- ä¸€å€‹å°ç±³é›»æ± äººåœ¨æ„Ÿæ¸¬å™¨
- ä¸€é¡†å…¨æ–°çš„CR2450
- æ‰‹æ©Ÿå®‰è£ç±³å®¶APP
- æ“æœ‰ä¸€çµ„å°ç±³å¸³è™Ÿ
- ç±³å®¶APPçš„åœ°å€åˆ‡æ›åˆ°`ä¸­åœ‹å¤§é™¸`
- HAæœ‰è—èŠ½åŠŸèƒ½
- HAæ ¸å¿ƒåœ¨`2025.03`(å«)ä»¥ä¸Š

ç¢ºèªä½ çš„ç±³å®¶APPæœ‰åˆ‡æ›åˆ°ä¸­åœ‹ä¼ºæœå™¨

> ç±³å®¶APPâ†’æˆ‘çš„â†’æ›´å¤šè¨­å®šâ†’åœ°å€â†’`ä¸­åœ‹å¤§é™¸`

![](attachments/mi_human_presence/ä¼ºæœå™¨è¨­å®š.jpg)

åƒè€ƒä»¥ä¸‹å½±ç‰‡å°‡æ„Ÿæ‡‰å™¨èˆ‡ç±³å®¶APPåšé…å°

https://github.com/user-attachments/assets/cda3a2be-5a22-4195-b854-cf1d732bf143

æ¥è‘—åœ¨Home Assistantè¨­å®šæ„Ÿæ‡‰å™¨

https://github.com/user-attachments/assets/0df20513-8b10-48c3-9cb1-ab312afaa5d7

å®Œæ•´çš„æ•¸å€¼åˆ—è¡¨å¯åƒè€ƒé™„åœ–

![](attachments/mi_human_presence/1.jpg)

æ­å–œä½ åŠ å…¥äº†è¶…æ£’çš„å°ç±³é›»æ± äººåœ¨æ„Ÿæ‡‰

è¶•å¿«å»è¨­å®šè‡ªå‹•åŒ–ç©ç©çœ‹å§!

## å…è²¬è²æ˜

æœ¬è²¼æ–‡æ²’æœ‰ä»»ä½•æ¥­é…æˆ–æ¨å‘ï¼Œç´”ç²¹æ˜¯å€‹äººç¶“é©—åˆ†äº«ï¼Œé«˜CPå€¼çš„ç”¢å“å¯èƒ½å› ç‚ºç”Ÿç”¢å…¬å·®ã€ç”¨æ–™ã€å¯©ç¾ã€å€‹äººé‹æ°£ç­‰å› ç´ å°è‡´æ¯å€‹äººå•†å“é«”é©—ä¸åŒï¼Œè«‹è¬¹æ…è©•ä¼°å¾Œè³¼è²·ã€‚

[ğŸ§¾å»é¸å–®](../../README.md)
